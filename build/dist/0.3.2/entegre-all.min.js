// EntegreJS -- http://entegre.io
"use strict";
class Entegre {
constructor() {
this.idc = 1;
this.factory = {};
this.tag = {};
this.bootstrap = {};
this.widget = {};
this.control = {};
this.utility = {
events:class {
constructor() {
this.e = {};
}
register(n) {
if(n && !E.empty(n) && !(n in this.e)) {
this.e[ n] =[];
}
return this;
}
listen(n,f) {
if(n && !E.empty(n) && f && E.type(f,'function')) {
this.register(n);
this.e[ n].push(f);
}
return this;
}
trigger(n,a) {
this.register(n);
this.e[ n].forEach(function(c) {
c(a);
});
return this;
}
events() {
return Object.keys(this.e);
}
}
};
this.events = new this.utility.events();
}
id(p) {
var s = (p && p.length > 0 ? p:'ejs') + this.idc;
this.idc ++;
return s;
}
type(o,t) {
var x = Object.prototype.toString.call(o);
x = x.substring(8,(x.length - 1)).toLowerCase();
if(t) {
return (t == x);
}
return x;
}
iterable(x) {
var y = this.type(x);
return (y == 'object' || y == 'array');
}
empty(x) {
if(x == null) {
return true;
}
if(x.length > 0) {
return false;
}
if(x.length === 0) {
return true;
}
for(var k in x) {
if(Object.prototype.hasOwnProperty.call(x,k)) {
return false;
}
}
return true;
}
random(min,max) {
min = new Number(min);
max = new Number(max);
return Math.floor(Math.random() * (max - min + 1)) + min;
}
chunk(x,s) {
if(x && this.type(x,'array')) {
s = parseInt(s);
if(x.length > s) {
var y =[];
while(x.length > 0) {
var z =[];
for(var i = 1; i <= s; i ++) {
if(x.length > 0) {
z.push(x.shift());
}
}
y.push(z);
}
return y;
}
}
return x;
}
node(t,a,c) {
return new E.factory.node(t,a,c);
}
}
var E = new Entegre();
function $E(cls,arg) {
cls = cls.toString().toLowerCase();
var ptr = false;
if(E.bootstrap && cls in E.bootstrap) {
ptr = E.bootstrap[ cls];
} else if(E.widget && cls in E.widget) {
ptr = E.widget[ cls];
} else if(E.control && cls in E.control) {
ptr = E.control[ cls];
} else if(E.tag && cls in E.tag) {
ptr = E.tag[ cls];
}
if(ptr === false) {
return arg ? E.node(cls,arg):E.node(cls);
} else {
return arg ? new ptr(arg):new ptr();
}
return false;
}
E.factory.attr = class {
constructor() {
this.a = {};
}
_attr(k,v) {
k = k.toString();
if(!(k in this.a)) {
this.a[ k] =[];
}
this.a[ k].push(v);
}
attr(k,v) {
if(!(E.empty(k) && E.empty(v))) {
if(E.iterable(k)) {
if(E.empty(v)) {
for(var k1 in k) {
this._attr(k1,k[ k1]);
}
} else {
for(var k1 in k) {
this._attr(k1,v);
}
}
} else {
this._attr(k,v);
}
}
return this;
}
_buildattr(k,v) {
return `${k.toString()}="${(E.iterable(v) ? v.join(' '):v)}"`;
}
buildattrs() {
var s =[];
for(var k in this.a) {
s.push(this._buildattr(k,this.a[ k]));
}
return s.join(' ');
}
};
E.factory.iterable = class extends E.factory.attr {
constructor() {
super();
this.c =[];
}
child(v) {
if(v && !E.empty(v)) {
if(E.type(v,'array')) {
for(var k in v) {
this.c.push(v[ k]);
}
} else {
this.c.push(v);
}
}
return this;
}
};
E.factory.base = class extends E.factory.iterable {
constructor() {
super();
}
buildchildren() {
var s =[];
for(var k in this.c) {
if(this.c[ k].build) {
s.push(this.c[ k].build());
} else if(this.c[ k].toString) {
s.push(this.c[ k].toString());
} else {
s.push(this.c[ k]);
}
}
return s.join('');
}
};
E.factory.deck = class extends E.factory.attr {
constructor() {
super();
this.c =[];
}
card(title,body,attr) {
var x = {
'title':E.empty(title) ? null:title,
'body':E.empty(body) ? null:body,
'attr':!E.empty(attr) && E.iterable(attr) ? attr:{}
};
this.c.push(x);
return this;
}
};
E.factory.node = class extends E.factory.base {
constructor(tag,attrs,children) {
super();
this.t = (tag && tag.toString().length > 0) ? tag.toString().toLowerCase():'';
this.attr(attrs);
this.child(children);
}
build() {
var nc =[ 'br','hr','img','link','meta','meta-equiv','input'];
var a = this.buildattrs();
var s = `<${this.t + (!E.empty(a) ? ' ' + a:'')}>`;
if(!(this.t in nc)) {
s += `${this.buildchildren()}</${this.t}>`;
}
return s;
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.factory.paginated = class {
constructor() {
this.d =[];
this.opage = 10;
this.ostart = 0;
}
item(x) {
if(!E.empty(x)) {
this.d.push(x);
}
return this;
}
items(x) {
if(!E.empty(x) && E.type(x,'array')) {
this.d = x;
}
return this;
}
pagesize(x) {
this.opage = parseInt(x);
return this;
}
_total() {
return this.d.length;
}
_first() {
return (this.ostart > 0 ? 0:null);
}
_last() {
var i = (Math.ceil(this._total() / this.opage) - 1) * this.opage;
return (i <= this.ostart) ? null:i;
}
_prev() {
var i = (this.ostart - this.opage);
return (i >= 0) ? i:null;
}
_next() {
var i = (this.ostart + this.opage);
return (i <= this._total()) ? i:null;
}
_pagestart() {
return (this.ostart + 1);
}
_pageend() {
var i = (this.ostart + this.opage);
return (i > this._total() ? this._total():i);
}
_controls() {
if(this._total() > this.opage) {
var x = new E.bootstrap.pager({'class':'e-pagination'});
x.button($E('glyphicon','step-backward'),'#' + this.id,false,{'data-index':this._first(),'title':'First page','class':'page-first'});
x.button($E('glyphicon','triangle-left'),'#' + this.id,false,{'data-index':this._prev(),'title':'Previous page','class':'page-prev'});
x.button($E('glyphicon','triangle-right'),'#' + this.id,false,{'data-index':this._next(),'title':'Next page','class':'page-next'});
x.button($E('glyphicon','step-forward'),'#' + this.id,false,{'data-index':this._last(),'title':'Last page','class':'page-last'});
return x;
}
return '';
}
updatecontrols(id) {
var y = 'div[data-instance="' + id + '"] .e-pagination li';
$(y).hide();
var x = this._first();
if(x != null) {
$(y + ' a.page-first').data('index',x);
$(y + ' a.page-first').parent().show();
}
var x = this._prev();
if(x != null) {
$(y + ' a.page-prev').data('index',x);
$(y + ' a.page-prev').parent().show();
}
var x = this._next();
if(x != null) {
$(y + ' a.page-next').data('index',x);
$(y + ' a.page-next').parent().show();
}
var x = this._last();
if(x != null) {
$(y + ' a.page-last').data('index',x);
$(y + ' a.page-last').parent().show();
}
}
_status() {
return 'Showing records <span class="e-pagination-start"></span> to <span class="e-pagination-end"></span> of <span class="e-pagination-total"></span>';
}
updatestatus(id) {
var y = 'div[data-instance="' + id + '"] ';
$(y + '.e-pagination-start').html(this._pagestart());
$(y + '.e-pagination-end').html(this._pageend());
$(y + '.e-pagination-total').html(this._total());
}
data(i) {
this.ostart = parseInt(i);
var r =[];
for(var i = (this._pagestart() - 1); i < this._pageend(); i ++) {
r.push(this.d[ i]);
}
return r;
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
E.events.trigger(`${this.id}:pager`,0);
}
return this;
}
};
$('body').on('click','.e-pagination a',function() {
E.events.trigger($(this).parents('.e-pagination-instance').data('instance') + ':pager',$(this).data('index'));
$(this).blur();
});
E.tag.a = class extends E.factory.node {
constructor(attr,children) {
super('a',attr,children);
}
};
E.tag.div = class extends E.factory.node {
constructor(attr,children) {
super('div',attr,children);
}
};
E.tag.h = class extends E.factory.node {
constructor(size,attr,children) {
super('h' + size.toString(),attr,children);
}
};
E.tag.label = class extends E.factory.node {
constructor(text,forid) {
super('label');
if(!E.empty(forid)) {
this.attr('for',forid);
}
if(!E.empty(text)) {
this.child(text);
}
}
};
E.tag.p = class extends E.factory.node {
constructor(attr,children) {
super('p',attr,children);
}
};
E.bootstrap.conf = {
modes:[ 'default','primary','success','info','warning','danger','link'],
sizes:[ 'lg','','sm','xs','block'],
states:[ '','active','disabled'],
tablemodes:[ '','striped','bordered','condensed'],
imgmodes:[ 'rounded','circle','thumbnail'],
textmodes:[ 'muted','primary','success','info','warning','danger'],
bgmodes:[ 'primary','success','info','warning','danger'],
aligns:[ 'left','center','right','justify','nowrap'],
casemodes:[ 'up','down','camel','uppercase','lowercase','capitalize'],
columns:[ 'xs','sm','md','lg']
};
E.bootstrap.node = class extends E.factory.node {
constructor(prefix,tag,attrs,children) {
super(tag,attrs,children);
this.p = !E.empty(prefix) ? prefix.toString():null;
}
mode(x) {
if(!E.empty(this.p)) {
x = x.toString().toLowerCase();
if(E.bootstrap.conf.modes.includes(x)) {
this.attr('class',`${this.p}-${x}`);
}
}
return this;
}
size(x) {
if(!E.empty(this.p)) {
x = x.toString().toLowerCase();
if(E.bootstrap.conf.sizes.includes(x)) {
this.attr('class',`${this.p}-${x}`);
}
}
return this;
}
state(x) {
if(!E.empty(this.p)) {
x = x.toString().toLowerCase();
if(E.bootstrap.conf.states.includes(x)) {
this.attr('class',x);
}
}
return this;
}
textmode(x) {
x = x.toString().toLowerCase();
if(E.bootstrap.conf.textmodes.includes(x)) {
this.attr('class',`text-${x}`);
}
return this;
}
bgmode(x) {
x = x.toString().toLowerCase();
if(E.bootstrap.conf.bgmodes.includes(x)) {
this.attr('class',`bg-${x}`);
}
return this;
}
clearfix() {
this.attr('class','clearfix');
return this;
}
align(x) {
x = x.toString().toLowerCase();
if(E.bootstrap.conf.aligns.includes(x)) {
this.attr('class',`text-${x}`);
}
return this;
}
textcase(x) {
x = x.toString().toLowerCase();
if(E.bootstrap.conf.casemodes.includes(x)) {
switch(x) {
case 'up':
case 'upper':
case 'uppercase':
x = 'uppercase';
break;
case 'down':
case 'lower':
case 'lowercase':
x = 'lowercase';
break;
case 'camel':
case 'capitalize':
x = 'capitalize';
break;
}
this.attr('class',`text-${x}`);
}
return this;
}
};
E.bootstrap.accordion = class extends E.factory.deck {
constructor(attr) {
super();
this.attr(attr);
this.attr('class','e-accordion panel-group');
this.attr('role','tablist');
this.attr('aria-multiselectable','true');
}
build() {
if(!('id' in this.a)) {
this.attr('id',E.id());
}
var x = new E.tag.div(this.a);
if(!E.empty(this.c)) {
for(var i in this.c) {
var c = this.c[ i];
var y = new E.tag.div({'class':'panel panel-default'});
if(!E.empty(c.attr)) {
y.attr(c.attr);
}
var id = E.id();
if(!E.empty(c.title)) {
var h = new E.tag.a({'class':'e-accordion-toggle','role':'button','data-toggle':'collapse','data-parent':`#${this.a.id}`,'href':`#${id}`,'aria-expanded':'false','aria-controls':y.a.id},c.title);
h = new E.tag.div({'class':'panel-heading','role':'tab','id':`${id}-h`},new E.tag.h('4',{'class':'panel-title'},h));
y.child(h);
}
var z = new E.tag.div({'class':'panel-body'},c.body);
z = new E.tag.div({'class':'panel-collapse collapse','role':'tabpanel','id':id,'aria-labelledby':`${id}-h`},z);
y.child(z);
x.child(y);
}
}
return x.build();
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
$(function() {
$('body').on('click','.e-accordion-toggle',function() {
$(this).blur();
});
});
E.bootstrap.alert = class extends E.bootstrap.node {
constructor(attr,children) {
super('alert','div',attr,children);
this.attr('class','alert');
}
callout(s) {
if(s && !E.empty(s)) {
this.child(new E.factory.node('strong',null,s));
}
return this;
}
};
E.bootstrap.badge = class extends E.factory.node {
constructor(attr,children) {
super('span',attr,children);
this.attr('class','badge');
}
};
E.bootstrap.blockquote = class extends E.factory.node {
constructor(attr,children) {
super('blockquote',attr,children);
this.ft = null;
}
footer(x) {
if(!E.empty(x)) {
this.ft = x;
}
return this;
}
reverse() {
this.attr('class','blockquote-reverse');
return this;
}
build() {
if(!E.empty(this.ft)) {
this.child(new E.factory.node('footer',null,this.ft));
}
return super.build();
}
};
E.bootstrap.breadcrumbs = class extends E.factory.node {
constructor(attr,children) {
super('ol',attr);
this.attr('class','breadcrumb');
this.i =[];
}
crumb(url,label,active) {
if(label) {
this.i.push({'url':url,'label':label,'active':active});
}
return this;
}
build() {
for(var i in this.i) {
var y = (this.i[ i].active === true);
var l = y ? this.i[ i].label:new E.tag.a({'href':this.i[ i].url},this.i[ i].label);
this.child(new E.factory.node('li',y ? {'class':'active'}:null,l));
}
return super.build(); 
}
};
E.bootstrap.button = class extends E.bootstrap.node {
constructor(attr,children) {
super('btn','button',attr,children);
this.attr('class','btn');
}
};
E.bootstrap.checkbox = class extends E.factory.attr {
constructor(attr) {
super();
this.attr(attr);
this.oi = false;
this.od = false;
this.txt = '';
}
inline() {
this.oi = true;
return this;
}
disabled() {
this.od = true;
return this;
}
label(x) {
if(!E.empty(x)) {
this.txt = x;
}
return this;
}
build() {
var x = new E.factory.node('label');
if(this.oi === true) {
x.attr('class','checkbox-inline');
}
var y = new E.factory.node('input',{'type':'checkbox'});
if(this.od === true) {
y.attr('disabled',true);
}
y.attr(this.a);
x.child(y);
if(!E.empty(this.txt)) {
x.child(this.txt);
}
if(this.io !== true) {
x = new E.tag.div({'class':'checkbox'},x);
if(this.od === true) {
x.attr('disabled',true);
}
}
return x.build();
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.bootstrap.div = class extends E.bootstrap.node {
constructor(attr,children) {
super(null,'div',attr,children);
}
column(m,s) {
if(!E.empty(m)) {
m = m.toString().toLowerCase();
if(E.bootstrap.conf.columns.includes(m)) {
s = parseInt(s);
if(s >= 1 && s <= 12) {
this.attr('class',`${m}-${s}`);
}
}
}
return this;
}
offset(m,s) {
if(!E.empty(m)) {
m = m.toString().toLowerCase();
if(E.bootstrap.conf.columns.includes(m)) {
s = parseInt(s);
if(s >= 1 && s <= 12) {
this.attr('class',`${m}-offset-${s}`);
}
}
}
return this;
}
};
E.bootstrap.dropdown = class extends E.factory.iterable {
constructor(attr,children) {
super(attr,children);
this.attr('class','dropdown');
this.db = '';
}
label(str) {
if(!E.empty(str)) {
this.db = str.toString();
}
return this;
}
item(url,label,active,disabled) {
if(!E.empty(label)) {
var x = {'url':url.toString(),'label':label,'active':false,'disabled':false};
if(active && active === true) {
x.active = true;
}
if(disabled && disabled === true) {
x.disabled = true;
}
this.child(x);
}
return this;
}
separator() {
this.child({'separator':true});
return this;
}
build() {
var z = new E.tag.div({'class':'dropdown'});
if(!('id' in this.a)) {
this.attr('id',E.id());
}
var x = new E.bootstrap.button({'class':'btn-default dropdown-toggle','type':'button','id':this.a.id,'data-toggle':'dropdown','aria-haspopup':'true','aria-expanded':'false'});
if(!E.empty(this.db)) {
x.child(this.db);
}
x.child(' ').child(new E.factory.node('span',{'class':'caret'}));
z.child(x);
x = new E.bootstrap.list({'class':'dropdown-menu','aria-labelledby':this.a.id});
for(var i in this.c) {
if('separator' in this.c[ i]) {
x.separator();
} else {
var y = new E.tag.a({'href':this.c[ i].url},this.c[ i].label);
x.child(y,this.c[ i].active,this.c[ i].disabled);
}
}
z.child(x);
return z.build();
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.bootstrap.form = class extends E.factory.node {
constructor(attr,children) {
super('form',attr,children);
}
horizontal() {
this.attr('class','form-horizontal');
return this;
}
inline() {
this.attr('class','form-inline');
return this;
}
};
E.bootstrap.formgroup = class extends E.factory.node {
constructor(attr,children) {
super('div',attr,children);
this.attr('class','form-group');
}
};
E.bootstrap.glyphicon = class extends E.factory.node {
constructor(icon,attr) {
super('i');
this.attr(attr);
this.attr('class',`glyphicon glyphicon-${icon.toString().toLowerCase()}`);
}
};
E.bootstrap.heading = class extends E.bootstrap.node {
constructor(size,primary,secondary) {
super(null,'h' + size.toString());
this.tp = null;
this.ts = null;
this.primary(primary);
this.secondary(secondary);
}
primary(x) {
if(!E.empty(x)) {
this.tp = x;
}
return this;
}
secondary(x) {
if(!E.empty(x)) {
this.ts = x;
}
return this;
}
build() {
if(!E.empty(this.tp)) {
this.child(this.tp);
}
if(!E.empty(this.ts)) {
this.child(' ');
this.child(new E.factory.node('small',null,this.ts));
}
return super.build();
}
};
E.bootstrap.image = class extends E.factory.node {
constructor(attr,children) {
super('img',attr,children);
}
mode(x) {
x = x.toString().toLowerCase();
if(!E.empty(x) && E.bootstrap.conf.imgmodes.includes(x)) {
this.attr('class',`img-${x}`);
}
return this;
}
};
E.bootstrap.input = class extends E.factory.node {
constructor(attr,children) {
super('input',attr,children);
this.attr('class','form-control');
}
};
E.bootstrap.inputgroup = class extends E.factory.node {
constructor(attr,children) {
super('div',attr,children);
this.attr('class','input-group');
this.ap = null;
this.as = null;
this.ifd = null;
this.is = '';
}
size(x) {
x = x.toString().toLowerCase();
if(E.bootstrap.sizes.includes(x)) {
this.is = x;
}
return this;
}
before(x) {
if(!E.empty(x)) {
this.ap = x;
}
return this;
}
after(x) {
if(!E.empty(x)) {
this.as = x;
}
return this;
}
field(x) {
if(!E.empty(x)) {
this.ifd = x;
}
return this;
}
build() {
if(!E.empty(this.is)) {
this.attr('class',`input-group-${this.is}`);
}
if(!E.empty(this.ap)) {
this.child(new E.factory.node('span',{'class':'input-group-addon'},this.ap));
}
this.child(this.ifd);
if(!E.empty(this.as)) {
this.child(new E.factory.node('span',{'class':'input-group-addon'},this.as));
}
return super.build();
}
};
E.bootstrap.jumbotron = class extends E.factory.node {
constructor(attr,children) {
super('div',attr,children);
this.attr('class','jumbotron');
}
header(x) {
if(!E.empty(x)) {
this.child(new E.tag.h('1',null,x));
}
return this;
}
};
E.bootstrap.label = class extends E.bootstrap.node {
constructor(attr,children) {
super('label','span',attr,children);
this.attr('class','label');
}
};
E.bootstrap.list = class extends E.factory.node {
constructor(attr,children) {
super('ul',attr,children);
}
ordered() {
this.t = 'ol';
return this;
}
unordered() {
this.t = 'ul';
return this;
}
inline() {
this.attr('class','list-inline');
return this;
}
child(c,active,disabled) {
if(!E.empty(c)) {
var x = new E.factory.node('li',null,c);
if(active && active === true) {
x.attr('class','active');
}
if(disabled && disabled === true) {
x.attr('class','disabled');
}
super.child(x);
}
return this;
}
separator() {
super.child(new E.factory.node('li',{'role':'separator','class':'divider'}));
}
};
E.bootstrap.modal = class extends E.factory.node {
constructor(attr,children) {
super('div',attr,children);
this.attr('class','modal fade');
this.attr('tabindex','-1');
this.attr('role','dialog');
this.mh = null;
this.mb =[];
this.mf =[];
this.osize = null;
this.cb = true;
}
noclose() {
this.cb = false;
}
large() {
this.osize = 'lg';
return this;
}
small() {
this.osize = 'sm';
return this;
}
header(x) {
if(!E.empty(x)) {
this.mh = x;
}
return this;
}
body(x) {
if(!E.empty(x)) {
this.mb.push(x);
}
return this;
}
footer(x) {
if(!E.empty(x)) {
this.mf.push(x);
}
return this;
}
build() {
if(!('id' in this.a)) {
this.attr('id',E.id());
}
var z = new E.tag.div({'class':'modal-content'});
if(this.cb || !E.empty(this.mh)) {
var x = new E.tag.div({'class':'modal-header'});
if(this.cb) {
var y = new E.factory.node('span',{'aria-hidden':'true'},'&times;');
x.child(new E.factory.node('button',{'type':'button','class':'close','data-dismiss':'modal','aria-label':'Close'},y));
}
if(!E.empty(this.mh)) {
x.child(new E.tag.h('4',{'class':'modal-title'},this.mh));
}
z.child(x);
}
if(!E.empty(this.mb)) {
z.child(new E.tag.div({'class':'modal-body'},this.mb));
}
if(!E.empty(this.mf)) {
z.child(new E.tag.div({'class':'modal-footer'},this.mf));
}
x = new E.tag.div({'class':'modal-dialog','role':'document'},z);
if(!E.empty(this.osize)) {
x.attr('class',`modal-${this.osize}`);
}
this.child(x);
return super.build();
}
};
E.bootstrap.navbar = class extends E.factory.iterable {
constructor(attr,children) {
super(attr,children);
this.attr('class','dropdown');
this.db = '';
this.ofluid = false;
this.oinverse = false;
this.ofixed = false;
}
brand(str) {
if(!E.empty(str)) {
this.db = str;
}
return this;
}
fluid() {
this.ofluid = true;
return this;
}
fixed() {
this.ofixed = true;
return this;
}
inverse() {
this.oinverse = true;
return this;
}
item(url,label,active,disabled) {
if(!E.empty(label)) {
var x = {'url':url.toString(),'label':label,'active':false,'disabled':false};
if(active && active === true) {
x.active = true;
}
if(disabled && disabled === true) {
x.disabled = true;
}
this.child(x);
}
return this;
}
build() {
if(!('id' in this.a)) {
this.attr('id',E.id());
}
var x = new E.tag.div({'class':`container${this.ofluid ? '-fluid':''}`});
var y = new E.factory.node('span',{'class':'icon-bar'});
var b = new E.bootstrap.button({'class':'navbar-toggle collapsed','type':'button','data-toggle':'collapse','data-target':`#${this.a.id}`,'aria-expanded':'false'});
b.child(new E.factory.node('span',{'class':'sr-only'},'Toggle navigation')).child(y).child(y).child(y);
y = new E.tag.div({'class':'navbar-header'},b);
if(!E.empty(this.db)) {
y.child(this.db);
}
x.child(y);
y = new E.bootstrap.list({'class':'nav navbar-nav'});
for(var i in this.c) {
y.child(new E.tag.a({'href':this.c[ i].url},this.c[ i].label),this.c[ i].active,this.c[ i].disabled);
}
y = new E.tag.div({'class':'collapse navbar-collapse','id':this.a.id},y);
x.child(y);
x = new E.factory.node('nav',{'class':'navbar'},x);
if(this.ofixed === true) {
x.attr('class','navbar-fixed-top');
}
if(this.oinverse === true) {
x.attr('class','navbar-inverse');
}
return x.build();
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.bootstrap.p = class extends E.bootstrap.node {
constructor(attr,children) {
super(null,'p',attr,children);
}
lead() {
this.attr('class','lead');
}
};
E.bootstrap.pageheader = class extends E.bootstrap.heading {
constructor(primary,secondary) {
super('1',primary,secondary);
}
build() {
var x = new E.bootstrap.div({'class':'page-header'},super.build());
return x.build();
}
};
E.bootstrap.pager = class extends E.factory.attr {
constructor(attr) {
super();
this.attr(attr);
this.c =[];
}
button(label,href,disabled,attr) {
if(!E.empty(label)) {
var x = {'label':label,'url':href,'disabled':false,'attr':(attr ? attr:{})};
if(disabled && disabled === true) {
x.disabled = true;
}
this.c.push(x);
}
return this;
}
build() {
var x = new E.bootstrap.list({'class':'pager'});
for(var i in this.c) {
var y = new E.factory.node('a',{'href':this.c[ i].url},this.c[ i].label);
if(!E.empty(this.c[ i].attr)) {
y.attr(this.c[ i].attr);
}
x.child(y,null,this.c[ i].disabled);
}
x = new E.factory.node('nav',this.a,x);
return x.build();
}
};
E.bootstrap.panel = class extends E.bootstrap.node {
constructor(attr,children) {
super('panel','div',attr,children);
this.attr('class','panel');
this.ph =[];
this.pb =[];
this.pf =[];
}
header(x) {
if(!E.empty(x)) {
this.ph.push(x);
}
return this;
}
body(x) {
if(!E.empty(x)) {
this.pb.push(x);
}
return this;
}
footer(x) {
if(!E.empty(x)) {
this.pf.push(x);
}
return this;
}
build() {
if(!E.empty(this.ph)) {
var x = new E.tag.div({'class':'panel-heading'});
if(this.ph.length == 1) {
x.child(new E.tag.h('3',{'class':'panel-title'},this.ph[0]));
} else {
for(var i in this.ph) {
x.child(this.ph[ i]);
}
}
this.child(x);
}
if(!E.empty(this.pb)) {
this.child(new E.tag.div({'class':'panel-body'},this.pb));
}
if(!E.empty(this.pf)) {
this.child(new E.tag.div({'class':'panel-footer'},this.pf));
}
return super.build();
}
};
E.bootstrap.progressbar = class extends E.factory.node {
constructor(attr,children) {
super('div',attr,children);
this.attr('class','e-progress progress');
this.bi =[];
}
bar(min,max,value,mode,label,attr) {
var x = {
'min':parseInt(min),
'max':parseInt(max),
'value':parseInt(value),
'size':0,
'label':E.empty(label) ? '':label,
'attr':E.empty(attr) ? {}:attr
};
x.size = (x.value / (x.max - x.min)) * 100;
if(!E.empty(mode)) {
mode = mode.toString().toLowerCase();
if(E.bootstrap.conf.modes.includes(mode) || mode == 'offset') {
x.mode = mode;
if(mode == 'offset') {
x.attr.style = 'background-color:transparent !important; box-shadow:none !important;';
}
}
}
this.bi.push(x);
return this;
}
build() {
for(var i in this.bi) {
var b = this.bi[ i];
var x = new E.tag.div({'class':'progress-bar','role':'progressbar','aria-valuemin':b.min,'aria-valuemax':b.max,'aria-valuenow':b.value});
x.attr(b.attr);
x.attr('style','width:' + b.size + '%');
if('mode' in b) {
x.attr('class','progress-bar-' + b.mode);
}
if(!E.empty(b.label)) {
x.child(b.label);
}
this.child(x);
}
return super.build();
}
};
E.bootstrap.radio = class extends E.factory.attr {
constructor(attr) {
super();
this.attr(attr);
this.oi = false;
this.od = false;
this.txt = '';
}
inline() {
this.oi = true;
return this;
}
disabled() {
this.od = true;
return this;
}
label(x) {
if(!E.empty(x)) {
this.txt = x;
}
return this;
}
build() {
var x = new E.factory.node('label');
if(this.oi === true) {
x.attr('class','radio-inline');
}
var y = new E.factory.node('input',{'type':'radio'});
if(this.od === true) {
y.attr('disabled',true);
}
y.attr(this.a);
x.child(y);
if(!E.empty(this.txt)) {
x.child(this.txt);
}
if(this.oi !== true) {
x = new E.tag.div({'class':'radio'},x);
if(this.od === true) {
x.attr('disabled',true);
}
}
return x.build();
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.bootstrap.select = class extends E.factory.iterable {
constructor(attr,children) {
super(attr);
this.attr('class','form-control');
if(children && !E.empty(children)) {
this.items(children);
}
this.sv = null;
this.mu = false;
}
multiple() {
this.mu = true;
return this;
}
selected(value) {
this.sv = value;
return this;
}
item(label,value,selected) {
if(!E.empty(label)) {
var x = {'value':value,'label':label};
if(selected && selected === true) {
x.selected = true;
}
this.child(x);
}
return this;
}
items(data) {
if(!E.empty(data) && E.type(data,'array')) {
for(var i in data) {
d = data[ i];
if('value' in d && 'label' in d) {
this.item(d.label,d.value);
} else {
this.item(d[0],d[1]);
}
}
}
return this;
}
build() {
if(this.mu === true) {
this.attr('multiple',true);
}
var x = new E.factory.node('select',this.a);
for(var i in this.c) {
var c = this.c[ i];
var y = new E.factory.node('option',{'value':c.value},c.label);
if((c.selected && c.selected === true) || c.value == this.sv) {
y.attr('selected','selected');
}
x.child(y);
}
return x.build();
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.bootstrap.table = class extends E.factory.node {
constructor(attr,children) {
super('table',attr,children);
this.attr('class','table');
this.th =[];
this.tr =[];
this.tf = false;
this.thover = false;
}
mode(x) {
x = x.toString().toLowerCase();
if(!E.empty(x) && E.bootstrap.conf.tablemodes.includes(x)) {
this.attr('class',`table-${x}`);
}
return this;
}
hover() {
this.attr('class','table-hover');
return this;
}
footer() {
this.tf = true;
return this;
}
header(x) {
this.th.push(x);
return this;
}
headers(x) {
if(E.type(x,'array')) {
this.th = x;
}
return this;
}
row(x) {
if(E.iterable(x)) {
this.tr.push(x);
}
return this;
}
rows(x) {
if(!E.empty(x) && E.type(x,'array')) {
for(var i in x) {
this.row(x[i]);
}
}
return this;
}
build() {
var h = null;
if(!E.empty(this.th)) {
var x = new E.factory.node('tr');
for(var i in this.th) {
x.child(new E.factory.node('th',null,this.th[ i]));
}
this.child(new E.factory.node('thead',null,x));
if(this.tf === true) {
h = x;
}
}
var x = new E.factory.node('tbody');
if(!E.empty(this.tr)) {
for(var i in this.tr) {
if(E.iterable(this.tr[ i])) {
var r = new E.factory.node('tr');
for(var j in this.tr[ i]) {
r.child(new E.factory.node('td',null,this.tr[ i][ j]));
}
x.child(r);
}
}
}
this.child(x);
if(!E.empty(h)) {
this.child(new E.factory.node('tfoot',null,h));
}
return super.build();
}
};
E.bootstrap.tabs = class extends E.factory.deck {
constructor(attr) {
super();
this.attr(attr);
this.attr('class','e-tabs');
this.op = false;
this.oj = false;
}
pills() {
this.op = true;
return this;
}
justify() {
this.oj = true;
return this;
}
build() {
var x = new E.tag.div(this.a);
if(!E.empty(this.c)) {
var u = new E.factory.node('ul',{'class':'nav','role':'tablist'});
u.attr('class',this.op === true ? 'nav-pills':'nav-tabs');
if(this.oj === true) {
u.attr('class','nav-justified');
}
var b = new E.tag.div({'class':'tab-content'});
for(var i in this.c) {
var c = this.c[ i];
if(!E.empty(c.attr)) {
y.attr(c.attr);
}
var id = E.id();
if(!E.empty(c.title)) {
var a = new E.tag.a({'href':`#${id}`,'aria-controls':id,'role':'tab','data-toggle':'tab'},c.title);
var l = {'role':'presentation'};
if(i == 0) {
l['class'] = 'active';
}
u.child(new E.factory.node('li',l,a));
}
b.child(new E.tag.div({'class':`tab-pane${i == 0 ? ' active':''}`,'role':'tabpanel','id':id},c.body));
}
x.child(u).child(b);
}
return x.build();
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
$(function() {
$('body').on('click','.e-tabs a',function(e) {
e.preventDefault();
$(this).tab('show');
$(this).blur();
});
});
E.bootstrap.well = class extends E.factory.node {
constructor(attr,children) {
super('div',attr,children);
this.attr('class','well');
}
large() {
this.attr('class','well-lg');
return this;
}
small() {
this.attr('class','well-sm');
return this;
}
};
E.widget.flagicon = class extends E.factory.node {
constructor(country) {
super('i');
this.attr('class',`flag-icon flag-icon-${this.valid(country)}`);
}
static css() {
return 'https:/' + '/cdnjs.cloudflare.com/ajax/libs/flag-icon-css/1.0.0/css/flag-icon.min.css';
}
static flags() {
return[ 'ad','ae','af','ag','ai','al','am','ao','aq','ar','as','at','au','aw','ax','az',
'ba','bb','bd','be','bf','bg','bh','bi','bj','bl','bm','bn','bo','bq','br','bs',
'bt','bv','bw','by','bz','ca','cc','cd','cf','cg','ch','ci','ck','cl','cm','cn',
'co','cr','cu','cv','cw','cx','cy','cz','de','dj','dk','dm','do','dz','ec','ee',
'eg','eh','er','es','et','fi','fj','fk','fm','fo','fr','ga','gb','gd','ge','gf',
'gg','gh','gi','gl','gm','gn','gp','gq','gr','gs','gt','gu','gw','gy','hk','hm',
'hn','hr','ht','hu','id','ie','il','im','in','io','iq','ir','is','it','je','jm',
'jo','jp','ke','kg','kh','ki','km','kn','kp','kr','kw','ky','kz','la','lb','lc',
'li','lk','lr','ls','lt','lu','lv','ly','ma','mc','md','me','mf','mg','mh','mk',
'ml','mm','mn','mo','mp','mq','mr','ms','mt','mu','mv','mw','mx','my','mz','na',
'nc','ne','nf','ng','ni','nl','no','np','nr','nu','nz','om','pa','pe','pf','pg',
'ph','pk','pl','pm','pn','pr','ps','pt','pw','py','qa','re','ro','rs','ru','rw',
'sa','sb','sc','sd','se','sg','sh','si','sj','sk','sl','sm','sn','so','sr','ss',
'st','sv','sx','sy','sz','tc','td','tf','tg','th','tj','tk','tl','tm','tn','to',
'tr','tt','tv','tw','tz','ua','ug','um','us','uy','uz','va','vc','ve','vg','vi',
'vn','vu','wf','ws','ye','yt','za','zm','zw','eu','gb-eng','gb-sct','gb-wls'
];
}
valid(country) {
country = country.toString().toLowerCase();
if(E.widget.flagicon.flags().includes(country)) {
return country;
}
return '';
}
square() {
this.attr('class','flag-icon-squared');
return this;
}
};
E.widget.fontawesome = class extends E.factory.node {
constructor(icon) {
super('i');
this.attr('class',`fa fa-${icon.toString().toLowerCase()}`);
}
static css() {
return 'https:/' + '/maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css';
}
size(size) {
if(!E.empty(size)) {
var sizes =[ 'lg','2x','3x','4x','5x'];
size = size.toString().toLowerCase();
if(sizes.includes(size)) {
this.attr('class',`fa-${size}`);
}
}
return this;
}
fixedwidth() {
this.attr('class','fa-fw');
return this;
}
border() {
this.attr('class','fa-border');
return this;
}
rotate(angle) {
angle = parseInt(angle);
if(angle >= 0 && angle <= 360) {
this.attr('class',`fa-rotate-${angle}`);
}
return this;
}
flip(dir) {
if(!E.empty(dir)) {
switch(dir.toString().toLowerCase()) {
case 'h':
case 'horz':
dir = 'horizontal';
break;
case 'v':
case 'vert':
dir = 'vertical';
break;
}
if(dir in[ 'horizontal','vertical']) {
this.attr('class',`fa-flip-${dir}`);
}
}
return this;
}
};
E.widget.gravatar = class {
constructor(email,size) {
this.e = '';
this.s = '';
this.email(email);
this.size(size);
}
static js() {
return 'https:/' + '/cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.1.0/js/md5.min.js';
}
email(s) {
if(s && !E.empty(s)) {
this.e = s.toString().toLowerCase();
}
return this;
}
size(s) {
if(s) {
this.s = s.toString();
}
return this;
}
uri() {
return 'http:/' + '/www.gravatar.com/avatar/' + md5(this.e) + (!E.empty(this.s) ? '?s=' + this.s:'');
}
build() {
var x = new E.factory.node('img',{'class':'e-gravatar'});
x.attr('src',this.uri());
return x.build();
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.widget.highlight = class extends E.factory.node {
constructor(attr,children) {
super('pre',attr,children);
this.attr('class','e-highlight');
}
static css() {
return 'https:/' + '/cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/default.min.css';
}
static js() {
return 'https/' + '/cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js';
}
block(lang,str) {
if(!E.empty(lang) && !E.empty(str)) {
lang = lang.toString().toLowerCase();
str = window.hljs ? hljs.highlight(lang,str.toString()).value:str.toString();
this.child(new E.factory.node('code',{'class':lang},str));
}
return this;
}
};
E.widget.mustache = class {
constructor() {
this.c =[];
}
static js() {
return 'https:/' + '/cdnjs.cloudflare.com/ajax/libs/mustache.js/2.2.1/mustache.min.js';
}
child(template,data) {
if(!E.empty(template) && !E.empty(data)) {
this.c.push({'template':template,'data':data});
}
return this;
}
build() {
if(window.Mustache) {
var x =[];
for(var i in this.c) {
x.push(Mustache.render(this.c[ i].template,this.c[ i].data));
}
return x.join('');
}
return '';
}
toString() {
return this.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.widget.octicon = class extends E.factory.node {
constructor(icon) {
super('i');
this.attr('class',`octicon-${icon.toString().toLowerCase()}`);
this.omega = false;
}
static css() {
return 'https:/' + '/cdnjs.cloudflare.com/ajax/libs/octicons/3.4.1/octicons.min.css';
}
mega() {
this.omega = true;
return this;
}
build() {
this.attr('class',`${(this.omega ? 'mega-':'')}octicon`); 
return super.build();
}
};
E.widget.weathericon = class extends E.factory.node {
constructor(icon) {
super('i');
this.attr('class',`wi wi-${icon}`);
}
static css() {
return[
'https:/' + '/cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.10/css/weather-icons.min.css',
'https:/' + '/cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.10/css/weather-icons-wind.min.css'
];
}
flip(dir) {
dir = dir.toString().toLowerCase();
var h =[ 'horizontal','h','horz'];
var v =[ 'vertical','v','vert'];
if(h.includes(dir)) {
dir = h[0];
} else if(v.includes(dir)) {
dir = v[0];
} else {
dir = null;
}
if(!E.empty(dir)) {
this.attr('class',`wi-flip-${dir}`);
}
return this;
}
rotate(angle) {
angle = parseInt(angle);
if(angle in[ 90,180,270]) {
this.attr('class',`wi-rotate-${angle}`);
}
return this;
}
fixedwidth() {
this.attr('class','wi-fw');
return this;
}
wind() {
this.attr('class','wi-wind');
return this;
}
};
E.control.bootswatch = class {
constructor() {
$('head').append('<link rel="stylesheet" id="e-bootswatch">');
}
static themes() {
return[ 'cerulean','cosmo','cyborg','darkly','flatly','journal','lumen','paper','readable',
'sandstone','simplex','slate','spacelab','superhero','united','yeti'];
}
url(t) {
return 'https:/'+'/maxcdn.bootstrapcdn.com/bootswatch/3.3.6/'+t+'/bootstrap.min.css';
}
load(u) {
$('link#e-bootswatch').attr('href',u);
}
clear() {
this.load(null);
return this;
}
theme(t) {
t = !E.empty(t) ? t.toString().toLowerCase():null;
if(E.control.bootswatch.themes().includes(t)) {
this.load(this.url(t));
}
return this;
}
};
E.control.datatable = class extends E.factory.paginated {
constructor() {
super();
this.col =[];
this.id = E.id();
var self = this;
E.events.listen(`${this.id}:pager`,function(i) {self.update(i);});
}
columns(labels) {
if(!E.empty(labels) && E.type(labels,'array')) {
this.col = labels;
}
return this;
}
column(label) {
if(!E.empty(label)) {
this.col.push(label);
}
return this;
}
update(i) {
var r = this.data(i);
var x =[];
for(var i1 in r) {
var y = new E.factory.node('tr');
for(var i2 in r[ i1]) {
y.child(new E.factory.node('td',null,r[ i1][ i2]));
}
x.push(y.build());
}
$('div[data-instance="' + this.id + '"] tbody').empty().append(x.join());
this.updatestatus(this.id);
this.updatecontrols(this.id);
}
build() {
var x = new E.tag.div({'class':'e-datatable e-pagination-instance','data-instance':this.id});
var y = new E.bootstrap.table().headers(this.col).hover();
x.child(new E.tag.div({'class':'row'},new E.tag.div({'class':'col-xs-12'},y)));
y = new E.tag.div({'class':'col-xs-6'},this._status());
var z = new E.tag.div({'class':'col-xs-6 text-right'},this._controls());
x.child(new E.tag.div({'class':'row'},[ y,z]));
return x.build();
}
};
E.control.dataview = class extends E.factory.paginated {
constructor() {
super();
this.ocolumns = 4;
this.otemplate = '';
this.ocallback = '';
this.id = E.id();
var self = this;
E.events.listen(`${this.id}:pager`,function(i) {self.update(i);});
}
columns(i) {
this.ocolumns = parseInt(i);
return this;
}
template(x) {
if(!E.empty(x)) {
this.otemplate = x.toString();
}
return this;
}
callback(x) {
if(!E.empty(x) && E.type(x,'function')) {
this.ocallback = x;
}
return this;
}
_renderitem(x) {
if(x) {
if(!E.empty(this.otemplate) && window.Mustache) {
return Mustache.render(this.otemplate,x);
} else if(!E.empty(this.ocallback)) {
return this.ocallback(x);
} else if(x.build) {
return x.build();
} else if(x.toString) {
return x.toString();
} else {
return x;
}
}
return '';
}
update(i) {
var r = E.chunk(this.data(i),this.ocolumns);
var x =[];
for(var i1 in r) {
var y = new E.factory.node('tr');
for(var i2 in r[ i1]) {
y.child(new E.factory.node('td',null,this._renderitem(r[ i1][ i2])));
}
x.push(y.build());
}
$('div[data-instance="' + this.id + '"] tbody').empty().append(x.join());
this.updatestatus(this.id);
this.updatecontrols(this.id);
}
build() {
var x = new E.tag.div({'class':'e-dataview e-pagination-instance','data-instance':this.id});
var y = new E.factory.node('table',{'style':'width:100%'});
y.child(new E.factory.node('tbody'));
x.child(new E.tag.div({'class':'row'},new E.tag.div({'class':'col-xs-12'},y)));
y = new E.tag.div({'class':'col-xs-6'},this._status());
var z = new E.tag.div({'class':'col-xs-6 text-right'},this._controls());
x.child(new E.tag.div({'class':'row'},[ y,z]));
return x.build();
}
};
E.control.notifications = class {
constructor() {
this.id = E.id();
this.m = 'bubble';
this.timers = {};
this.t = 3;
}
bubble() {
this.m = 'bubble';
return this;
}
bar() {
this.m = 'bar';
return this;
}
embed() {
this.m = 'embed';
return this;
}
delay(i) {
if(i) {
this.t = parseInt(i);
}
return this;
}
clear(i) {
if(i && this.timers[ i]) {
window.clearTimeout(this.timers[ i]);
$('#' + i).remove();
return true;
}
return false;
}
post(m,c,t) {
var id = E.id();
var x = $E('alert').mode(m).attr('id',id);
if(c && !E.empty(c)) {
x.callout(c).child(this.m == 'bubble' ? '<br>':' ');
}
if(t && !E.empty(t)) {
x.child(t);
}
x = x.build();
$('#' + this.id).append(x);
var self = this;
this.timers[ id] = window.setTimeout(function(x) {self.clear(x);},(this.t * 1000),id);
}
success(c,t) {
this.post('success',c,t);
}
info(c,t) {
this.post('info',c,t);
}
warning(c,t) {
this.post('warning',c,t);
}
danger(c,t) {
this.post('danger',c,t);
}
build() {
var x = new E.tag.div({'class':'e-notifications e-notifications-' + this.m,'id':this.id});
var y;
switch(this.m) {
case 'bar':
y = "position:absolute; top:0; left:0; right:0; z-index:9999;";
break;
case 'embed':
y = "position:relative; top:0; left:0; right:0; z-index:9999;";
break;
case 'bubble':
default:
y = "position:absolute; top:10px; right:10px; z-index:9999; width:200px; overflow:hidden;";
break;
}
x.attr('style',y);
return x.build();
}
toString() {
return this.build();
}
append(t) {
t = this.m == 'bubble' || E.empty(t) ? 'body':t;
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.control.timeline = class extends E.factory.iterable {
constructor(attr,children) {
super();
this.attr(attr);
this.child(children);
this.db = null;
this.de = null;
}
begin(d) {
this.db = moment(d);
return this;
}
end(d) {
this.de = moment(d);
return this;
}
event(label,begin,end,mode) {
var x = {
'label':E.empty(label) ? null:label,
'begin':E.empty(begin) ? null:moment(begin),
'end':E.empty(end) ? null:moment(end),
'offset':0,
'length':0,
'mode':'default'
};
if(!E.empty(mode)) {
mode = mode.toString().toLowerCase();
if(E.bootstrap.conf.modes.includes(mode)) {
x.mode = mode;
}
}
if(!E.empty(x.begin) && !E.empty(this.db)) {
x.offset = x.begin.diff(this.db);
}
if(!E.empty(x.begin) && !E.empty(x.end)) {
x.length = x.end.diff(x.begin);
}
this.child(x);
return this;
}
build() {
this.length = (!E.empty(this.db) && !E.empty(this.de)) ? this.de.diff(this.db):0;
var x = new E.tag.div({'class':'e-timeline'});
for(var i in this.c) {
var c = this.c[ i];
var r = new E.tag.div({'class':'row'});
r.child(new E.tag.div({'class':'col-xs-6 col-md-4 text-nowrap text-right e-timeline-label'},c.label));
var p = new E.bootstrap.progressbar();
if(c.offset > 0) {
p.bar(0,this.length,c.offset,'offset');
}
p.bar(0,this.length,c.length,c.mode);
r.child(new E.tag.div({'class':'col-xs-6 col-md-8'},p));
x.child(r);
}
return x.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.control.tree = class extends E.factory.iterable {
constructor(attr,children) {
super();
this.attr(attr);
this.child(children);
}
branch(label,tree) {
if(!E.empty(label) && tree instanceof E.control.tree) {
this.child(new E.factory.treebranch(label,tree));
}
return this;
}
build(id) {
if(!E.empty(id)) {
this.attr('id',id);
this.attr('class','collapse');
}
var x = E.node('ul',this.a);
x.attr('style',"list-style-type:none;");
if(!E.empty(this.c)) {
for(var i in this.c) {
var c = this.c[ i];
var y = E.node('li');
if(c instanceof E.factory.treebranch) {
var n = E.id('et');
var z = new E.bootstrap.glyphicon('chevron-right',{'id':`${n}-i`});
y.child(new E.tag.a({'class':'e-tree-toggle','href':`#${n}` ,'data-toggle':'collapse','aria-expanded':'false','aria-controls':n},z));
y.child(' ');
y.child(c.label());
y.child(c.items().build(n));
} else {
y.child(c);
}
x.child(y);
}
}
x = new E.tag.div({'class':'e-tree'},x);
return x.build();
}
append(t) {
if(!E.empty(t)) {
$(t).append(this.build());
}
return this;
}
};
E.factory.treebranch = class {
constructor(label,items) {
this.l = null;
this.i = null;
this.label(label);
this.items(items);
}
label(x) {
if(E.empty(x)) {
return this.l;
} else {
this.l = x;
}
return this;
}
items(x) {
if(E.empty(x)) {
return this.i;
} else {
this.i = x instanceof E.control.tree ? x:null;
}
return this;
}
};
$(function() {
$('body').on('click','.e-tree a.e-tree-toggle',function() {
var cr = 'glyphicon-chevron-right';
var cd = 'glyphicon-chevron-down';
var a = ($(this).attr('aria-expanded') == 'false');
var i = $(this).children('.glyphicon');
i.removeClass(cr).removeClass(cd).addClass(a ? cd:cr);
$(this).blur();
});
});